<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="4.0.0.825289672086">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 4.0.0">

    <!-- Primary Meta Tags -->
    <title>Macros | docs.ST.app</title>
    <meta name="title" content="Macros | docs.ST.app">
    <meta name="description" content="To enable advanced macro processing that supports nesting, stable substitution order, and other improvements, go to User Settings > Chat/Message Handling">

    <!-- Canonical -->
    <link rel="canonical" href="https://docs.sillytavern.app/usage/core-concepts/macros/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.sillytavern.app/usage/core-concepts/macros/">
    <meta property="og:title" content="Macros | docs.ST.app">
    <meta property="og:description" content="To enable advanced macro processing that supports nesting, stable substitution order, and other improvements, go to User Settings > Chat/Message Handling">
    <meta property="og:site_name" content="SillyTavern Documentation">
    <meta property="og:locale" content="en_US">

    <script data-cfasync="false">(function(){var cl=document.documentElement.classList,ls=localStorage.getItem("retype_scheme"),hd=cl.contains("dark"),hl=cl.contains("light"),wm=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;if(ls==="dark"||(!ls&&wm&&!hd&&!hl)){cl.remove("light");cl.add("dark")}else if(ls==="light"||(!ls&&!wm&&!hd&&!hl)){cl.remove("dark");cl.add("light")}})();</script>

    <link id="retype-favicon" rel="icon" href="../../../favicon.ico" />
    <link href="../../../resources/css/retype.css?v=4.0.0.825289672086" rel="stylesheet">

    <script data-cfasync="false" src="../../../resources/js/config.js?v=4.0.0.825289672086" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../../resources/js/retype.js?v=4.0.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../../resources/js/lunr.js?v=4.0.0.825289672086" data-turbo-eval="false" defer></script>

    <style>
        a {
            color: brown !important;
        }

        .dark a {
            color: rgb(223, 151, 18) !important;
        }

        body {
            font-family: Noto Sans, sans-serif;
        }

        .callout {
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #d2d6dc;
            border-radius: 0.375rem;
        }

        .callout p {
            margin-bottom: 0.5rem !important;
            overflow: hidden;
        }

        .callout p:last-child {
            margin-bottom: 0 !important;
        }

        .callout .fa-fw {
            margin: 1rem 0.5rem 1rem 0;
            color: slategrey;
        }

        #retype-content .codeblock code,
        #retype-content .codeblock pre {
            white-space: pre-wrap;
        }
    </style>
    <link href="/static/webfonts/NotoSans/stylesheet.css" rel="stylesheet" />
    <link href="/static/css/fontawesome.min.css" rel="stylesheet" />
    <link href="/static/css/solid.min.css" rel="stylesheet" />
    <link href="/static/css/brands.min.css" rel="stylesheet" />

</head>
<body>
    <div id="retype-app" class="relative text-base antialiased text-base-text bg-base-bg font-body">
    <div class="absolute bottom-0 left-0" style="top: 5rem; right: 50%"></div>

    <header id="retype-header" class="sticky top-0 z-30 flex w-full h-16 bg-header-bg border-b border-header-border md:h-20">
        <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
            <!-- Mobile menu button skeleton -->
            <button v-cloak class="skeleton retype-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-hidden rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
            <div v-cloak id="retype-sidebar-left-toggle-button"></div>
    
            <!-- Logo -->
            <div class="flex items-center justify-between h-full py-2 md:w-75">
                <div class="flex items-center px-2 md:px-6">
                    <a id="retype-branding-logo" href="../../../" class="flex items-center leading-snug text-xl">
                        <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                            <img class="max-h-10 dark:hidden md:inline-block" src="../../../static/logo-2.png">
                            <img class="max-h-10 hidden dark:inline-block" src="../../../static/logo.png">
                        </span>
                        <span class="dark:text-white font-bold line-clamp-1 md:line-clamp-2">SillyTavern Documentation</span>
                    </a>
                </div>
    
                <span class="hidden h-8 border-r md:inline-block border-base-border"></span>
            </div>
    
            <div class="flex justify-between md:grow">
                <!-- Top Nav -->
                <nav id="retype-header-nav" class="hidden md:flex">
                    <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/SillyTavern/SillyTavern">GitHub</a>
                        </li>
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://discord.gg/sillytavern">Discord</a>
                        </li>
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://www.reddit.com/r/SillyTavernAI/">Reddit</a>
                        </li>
    
                    </ul>
                </nav>
    
                <div v-cloak class="flex justify-end grow">
                    <div id="retype-mobile-search-button"></div>
                    <doc-search-desktop></doc-search-desktop>
    
                    <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                    <doc-history></doc-history>
                </div>
            </div>
        </div>
    </header>


    <div id="retype-container" class="container relative flex bg-white">
        <!-- Sidebar Skeleton -->
        <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-sidebar-left-bg border-sidebar-left-border sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton">
        
            <div class="flex items-center h-16 px-6">
                <input id="retype-filter-input-mock" class="w-full h-10 pl-8 px-3 py-2 transition-colors duration-200 ease-linear bg-filter-bg border border-filter-border rounded-lg shadow-none md:text-sm hover:border-filter-border-hover focus:outline-hidden focus:border-filter-border-focus placeholder-filter-placeholder" type="text">
            </div>
        
            <div class="pl-6 mt-1 mb-4">
                <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
            </div>
        
            <div class="shrink-0 mt-auto bg-transparent dark:border-base-border">
                <a class="flex items-center justify-center flex-nowrap h-16 text-gray-350 dark:text-dark-400 hover:text-gray-600 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                    <span class="text-xs whitespace-nowrap">Powered by</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                </a>
            </div>
        </div>
        
        <!-- Sidebar component -->
        <doc-sidebar v-cloak>
            <template #sidebar-footer>
                <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-base-border">
        
                    <div class="py-3 px-6 md:hidden border-b dark:border-base-border">
                        <nav>
                            <ul class="flex flex-wrap justify-center items-center">
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/SillyTavern/SillyTavern">GitHub</a>
                                </li>
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://discord.gg/sillytavern">Discord</a>
                                </li>
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://www.reddit.com/r/SillyTavernAI/">Reddit</a>
                                </li>
        
                            </ul>
                        </nav>
                    </div>
        
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-350 dark:text-dark-400 hover:text-gray-600 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </template>
        </doc-sidebar>

        <div class="grow min-w-0 bg-body-bg">
            <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
<div class="flex">
    <div id="retype-main" class="min-w-0 p-4 grow md:px-16">
        <main class="relative pb-12 lg:pt-2">
            <div class="retype-markdown" id="retype-content">
                <!-- Rendered if sidebar right is enabled -->
                <div id="retype-sidebar-right-toggle"></div>
                <!-- Page content  -->
<doc-anchor-target id="macros" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#macros">#</doc-anchor-trigger>
        <span>Macros</span>
    </h1>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1.5 rounded-tl-lg rounded-bl-lg bg-callout-tip"></div>
    <div class="flex w-full py-4 border border-l-0 rounded-tr-lg rounded-br-lg doc-callout bg-callout-base-bg border-callout-base-border" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-callout-tip" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M7.90625 2.15625C4.50944 2.15625 2.15625 4.58563 2.15625 7.54688C2.15625 8.96138 2.76575 9.88281 3.57075 10.8589L3.87837 11.2226C4.19894 11.6021 4.554 12.0218 4.84581 12.4416C5.25406 13.0324 5.61775 13.7296 5.7385 14.5834C5.76728 14.8608 5.68746 15.1386 5.51579 15.3583C5.34413 15.5781 5.09399 15.7228 4.8179 15.7621C4.5418 15.8013 4.26124 15.7321 4.03512 15.5689C3.809 15.4056 3.65493 15.1612 3.60525 14.8867C3.54775 14.4814 3.37094 14.1004 3.07338 13.6692C2.8306 13.3302 2.57055 13.0039 2.29425 12.6917C2.1735 12.5479 2.04556 12.397 1.909 12.2317C1.00769 11.1406 0 9.72613 0 7.54688C0 3.32062 3.39681 0 7.90625 0C12.4157 0 15.8125 3.32062 15.8125 7.54688C15.8125 9.72613 14.8048 11.1406 13.9035 12.2317C13.7669 12.397 13.639 12.5479 13.5183 12.6903C13.2207 13.0424 12.9677 13.3414 12.7406 13.6692C12.4416 14.1004 12.2662 14.4814 12.2087 14.8867C12.1557 15.1584 12.0003 15.3994 11.7747 15.5598C11.5492 15.7202 11.2706 15.7879 10.9965 15.7488C10.7225 15.7096 10.474 15.5667 10.3023 15.3496C10.1306 15.1325 10.0489 14.8577 10.074 14.582C10.1948 13.7296 10.5584 13.0324 10.9667 12.4416C11.2585 12.0218 11.6136 11.6021 11.9341 11.2226C12.0419 11.0961 12.1454 10.9739 12.2403 10.8589C13.0468 9.88281 13.6562 8.96138 13.6562 7.54688C13.6562 4.58563 11.3031 2.15625 7.90625 2.15625ZM4.67188 17.25H11.1406C11.4266 17.25 11.7008 17.3636 11.903 17.5658C12.1052 17.768 12.2188 18.0422 12.2188 18.3281C12.2188 18.6141 12.1052 18.8883 11.903 19.0905C11.7008 19.2927 11.4266 19.4062 11.1406 19.4062H4.67188C4.38594 19.4062 4.11171 19.2927 3.90953 19.0905C3.70734 18.8883 3.59375 18.6141 3.59375 18.3281C3.59375 18.0422 3.70734 17.768 3.90953 17.5658C4.11171 17.3636 4.38594 17.25 4.67188 17.25ZM5.03125 21.9219C5.03125 21.6359 5.14484 21.3617 5.34703 21.1595C5.54921 20.9573 5.82344 20.8438 6.10938 20.8438H9.70312C9.98906 20.8438 10.2633 20.9573 10.4655 21.1595C10.6677 21.3617 10.7812 21.6359 10.7812 21.9219C10.7812 22.2078 10.6677 22.482 10.4655 22.6842C10.2633 22.8864 9.98906 23 9.70312 23H6.10938C5.82344 23 5.54921 22.8864 5.34703 22.6842C5.14484 22.482 5.03125 22.2078 5.03125 21.9219Z" />
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Experimental Macro Engine</h5>
<p>To enable advanced macro processing that supports nesting, stable substitution order, and other improvements, go to <strong>User Settings</strong> &gt; <strong>Chat/Message Handling</strong> and enable the <strong>Experimental Macro Engine</strong> option.</p>
        </div>
    </div>
</div>
<p>Macros are dynamic placeholders that get replaced with actual values when text is processed. They are used throughout SillyTavern in prompts, character cards, lorebooks, Quick Replies, and more.</p>
<doc-anchor-target id="finding-available-macros">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#finding-available-macros">#</doc-anchor-trigger>
        <span>Finding Available Macros</span>
    </h2>
</doc-anchor-target>
<p>SillyTavern provides built-in documentation for all available macros:</p>
<ul>
<li><strong>Slash command</strong>: Type <code translate="no" v-pre>/? macros</code> in the chat input to display a list of all registered macros with their descriptions.</li>
<li><strong>Autocomplete</strong>: See <doc-anchor-trigger to="#macro-autocomplete">Macro Autocomplete</doc-anchor-trigger> below for details on getting suggestions while typing.</li>
</ul>
<doc-anchor-target id="macro-autocomplete">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#macro-autocomplete">#</doc-anchor-trigger>
        <span>Macro Autocomplete</span>
    </h3>
</doc-anchor-target>
<p>Macro autocomplete provides suggestions for available macros as you type. It works in all text fields that support macros throughout SillyTavern.</p>
<p>Type <code translate="no" v-pre>{{</code> to start autocomplete for macros, showing available macros and their arguments, potential <doc-anchor-trigger to="#macro-flags">Macro Flags</doc-anchor-trigger>, <doc-anchor-trigger to="#variable-shorthands">Variable Shorthands</doc-anchor-trigger>, and more.</p>
<p><strong>Where autocomplete appears by default:</strong></p>
<ul>
<li>Chat user input box</li>
<li>Expanded editor (full-screen text editing, opened via the &#x27;Expand&#x27; button next to text fields)</li>
<li>Prompt manager editor</li>
</ul>
<p><strong>Triggering autocomplete in other fields:</strong></p>
<ul>
<li>Press <strong>Ctrl+Space</strong> in any macro-supporting text field to open the autocomplete popup</li>
<li>Enable <strong>Settings → AutoComplete Settings → Show in all macro fields</strong> to have autocomplete appear automatically in all macro fields</li>
</ul>
<doc-anchor-target id="basic-syntax">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#basic-syntax">#</doc-anchor-trigger>
        <span>Basic Syntax</span>
    </h2>
</doc-anchor-target>
<p>Macros are enclosed in double curly braces:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{macroName}}</code></pre>
</doc-codeblock></div>
<p>Macro names are <strong>case-insensitive</strong>. <code translate="no" v-pre>{{User}}</code>, <code translate="no" v-pre>{{USER}}</code>, and <code translate="no" v-pre>{{user}}</code> all resolve to the same macro.</p>
<p>Examples:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{user}}        // Returns the current user/persona name
{{char}}        // Returns the current character name
{{time}}        // Returns the current time
{{date}}        // Returns the current date</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="arguments">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#arguments">#</doc-anchor-trigger>
        <span>Arguments</span>
    </h2>
</doc-anchor-target>
<p>Many macros accept arguments to customize their behavior.</p>
<doc-anchor-target id="space-separator">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#space-separator">#</doc-anchor-trigger>
        <span>Space Separator</span>
    </h3>
</doc-anchor-target>
<p>For macros with a single argument, a space can separate the macro name from its argument:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{macroName argument}}</code></pre>
</doc-codeblock></div>
<p>Examples:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{getvar myVariable}}
{{roll 1d20}}
{{reverse Hello World}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="double-colon-separator">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#double-colon-separator">#</doc-anchor-trigger>
        <span>Double Colon Separator</span>
    </h3>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>::</code> to separate multiple arguments:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{macroName::arg1::arg2::arg3}}</code></pre>
</doc-codeblock></div>
<p>Examples:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{setvar::myVariable::Hello World}}
{{random::red::green::blue}}
{{roll::2d6+3}}</code></pre>
</doc-codeblock></div>
<p>Both space and <code translate="no" v-pre>::</code> are the recommended syntax for macro arguments.</p>
<doc-anchor-target id="single-colon-separator-legacy">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#single-colon-separator-legacy">#</doc-anchor-trigger>
        <span>Single Colon Separator (Legacy)</span>
    </h3>
</doc-anchor-target>
<p>A single <code translate="no" v-pre>:</code> can also introduce arguments, but this syntax is considered legacy and not recommended for new content:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{macroName:argument}}</code></pre>
</doc-codeblock></div>
<p>Examples:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{roll:1d20}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="whitespace-in-macro-definitions">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#whitespace-in-macro-definitions">#</doc-anchor-trigger>
        <span>Whitespace in Macro Definitions</span>
    </h2>
</doc-anchor-target>
<p>Whitespace between the macro name, separators, and arguments is ignored. This allows for more readable formatting:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ macroName :: arg1 :: arg2 }}
{{ setvar :: myVariable :: some value }}
{{ if :: condition }}</code></pre>
</doc-codeblock></div>
<p>All of the above are equivalent to their compact forms without extra spaces.</p>
<doc-anchor-target id="nested-macros">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#nested-macros">#</doc-anchor-trigger>
        <span>Nested Macros</span>
    </h2>
</doc-anchor-target>
<p>Macros can be nested inside other macros. Inner macros are resolved first:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{getvar::{{char}}_mood}}</code></pre>
</doc-codeblock></div>
<p>This first resolves <code translate="no" v-pre>{{char}}</code> (e.g., to &quot;Alice&quot;), then resolves <code translate="no" v-pre>{{getvar::Alice_mood}}</code>.</p>
<p>More examples:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{setvar::greeting::Hello, {{user}}!}}</code></pre>
</doc-codeblock></div>
<p>Sets a variable with content that includes the user&#x27;s name.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{if {{getvar::showDetails}}}}Details here{{/if}}</code></pre>
</doc-codeblock></div>
<p>The condition itself is a macro that retrieves a variable value.</p>
<doc-anchor-target id="scoped-macros">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#scoped-macros">#</doc-anchor-trigger>
        <span>Scoped Macros</span>
    </h2>
</doc-anchor-target>
<p>Any macro that accepts at least one argument supports scoped syntax. The content between opening and closing tags becomes the <strong>last argument</strong> of the macro.</p>
<doc-anchor-target id="scoped-syntax">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#scoped-syntax">#</doc-anchor-trigger>
        <span>Scoped Syntax</span>
    </h3>
</doc-anchor-target>
<p>Instead of writing the last argument inline, it can be placed between opening and closing tags:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{macroName argument}}
  scoped content here
{{/macroName}}</code></pre>
</doc-codeblock></div>
<p>The closing tag uses the <code translate="no" v-pre>/</code> flag before the macro name: <code translate="no" v-pre>{{/macroName}}</code>.</p>
<p>This is equivalent to writing:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{macroName::argument::scoped content here}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="examples">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#examples">#</doc-anchor-trigger>
        <span>Examples</span>
    </h3>
</doc-anchor-target>
<p>Setting a variable with multiline content:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ setvar backstory }}
  This character was born in a small village
  and grew up to become a renowned scholar.
{{ /setvar }}</code></pre>
</doc-codeblock></div>
<p>Using <code translate="no" v-pre>reverse</code> with scoped content:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ reverse }}
  Hello World
{{ /reverse }}</code></pre>
</doc-codeblock></div>
<p>This returns &quot;dlroW olleH&quot;.</p>
<doc-anchor-target id="content-trimming">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#content-trimming">#</doc-anchor-trigger>
        <span>Content Trimming</span>
    </h3>
</doc-anchor-target>
<p>By default, scoped content is automatically trimmed:</p>
<ul>
<li>Leading and trailing whitespace is removed</li>
<li>Consistent indentation is de-dented (the indentation of the first non-empty line is removed from all lines)</li>
</ul>
<p>This allows clean formatting:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ if condition }}
    # Heading
    Some content here
{{ /if }}</code></pre>
</doc-codeblock></div>
<p>Produces <code translate="no" v-pre># Heading\nSome content here</code> (without the leading spaces).</p>
<p>To preserve all whitespace including leading/trailing newlines, use the <code translate="no" v-pre>#</code> flag. See <doc-anchor-trigger to="#macro-flags">Macro Flags</doc-anchor-trigger> for details.</p>
<doc-anchor-target id="conditional-macros">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#conditional-macros">#</doc-anchor-trigger>
        <span>Conditional Macros</span>
    </h2>
</doc-anchor-target>
<p>The <code translate="no" v-pre>{{if}}</code> macro renders content conditionally based on whether a value is truthy or falsy.</p>
<doc-anchor-target id="simple-condition">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#simple-condition">#</doc-anchor-trigger>
        <span>Simple Condition</span>
    </h3>
</doc-anchor-target>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ if description }}
  # Character Description
  {{ description }}
{{ /if }}</code></pre>
</doc-codeblock></div>
<p>This displays the heading and description only if <code translate="no" v-pre>description</code> returns a non-empty value.</p>
<p>The condition can be:</p>
<ul>
<li>A macro name (resolved automatically if no arguments are required)</li>
<li>Any value from a nested macro like <code translate="no" v-pre>{{getvar::flag}}</code></li>
<li>A variable shorthand like <code translate="no" v-pre>.myFlag</code> or <code translate="no" v-pre>$globalFlag</code> (see <doc-anchor-trigger to="#variable-shorthands">Variable Shorthands</doc-anchor-trigger>)</li>
<li>Any text you want (that will implicitly resolve to truthy or falsy based on its content)</li>
</ul>
<p>Falsy values: empty string, <code translate="no" v-pre>false</code>, <code translate="no" v-pre>0</code>, <code translate="no" v-pre>off</code>, <code translate="no" v-pre>no</code>.</p>
<doc-anchor-target id="using-variable-shorthands-in-conditions">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#using-variable-shorthands-in-conditions">#</doc-anchor-trigger>
        <span>Using Variable Shorthands in Conditions</span>
    </h3>
</doc-anchor-target>
<p>Variable shorthands provide a concise way to check variable values in conditions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ if .isEnabled }}
  Feature is enabled.
{{ /if }}

{{ if !$globalDisabled }}
  Not globally disabled.
{{ /if }}</code></pre>
</doc-codeblock></div>
<p>See <doc-anchor-trigger to="#variable-shorthands">Variable Shorthands</doc-anchor-trigger> for more details on shorthand notation.</p>
<doc-anchor-target id="inverted-condition">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#inverted-condition">#</doc-anchor-trigger>
        <span>Inverted Condition</span>
    </h3>
</doc-anchor-target>
<p>Prefix the condition with <code translate="no" v-pre>!</code> to invert it:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ if !personality }}
  No personality defined for this character.
{{ /if }}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="ifelse-branches">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#ifelse-branches">#</doc-anchor-trigger>
        <span>If/Else Branches</span>
    </h3>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>{{else}}</code> inside an <code translate="no" v-pre>{{if}}</code> block to define an alternative branch:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ if personality }}
  {{ personality }}
{{ else }}
  No personality defined.
{{ /if }}</code></pre>
</doc-codeblock></div>
<p>Another example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ if {{getvar::details-block}} }}
  # Details Block
  {{ getvar::details-block }}
{{ else }}
  No details currently exist.
{{ /if }}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="macro-flags">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#macro-flags">#</doc-anchor-trigger>
        <span>Macro Flags</span>
    </h2>
</doc-anchor-target>
<p>Flags are special symbol characters placed between the opening braces and the macro name that modify macro behavior.</p>
<doc-anchor-target id="syntax">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#syntax">#</doc-anchor-trigger>
        <span>Syntax</span>
    </h3>
</doc-anchor-target>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{!macroName}}
{{#macroName}}</code></pre>
</doc-codeblock></div>
<p>Flags can be combined:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{!?macroName}}</code></pre>
</doc-codeblock></div>
<p>Whitespace is allowed between flags and the macro name:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ / macroName }}
{{ # macroName }}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="implemented-flags">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#implemented-flags">#</doc-anchor-trigger>
        <span>Implemented Flags</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Flag</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>/</code></td>
<td>Closing Block</td>
<td>Marks a closing tag for scoped macros. Example: <code translate="no" v-pre>{{/if}}</code></td>
</tr>
<tr>
<td><code translate="no" v-pre>#</code></td>
<td>Preserve Whitespace</td>
<td>Prevents automatic trimming of scoped content.</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="planned-flags-not-yet-implemented">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#planned-flags-not-yet-implemented">#</doc-anchor-trigger>
        <span>Planned Flags (Not Yet Implemented)</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Flag</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>!</code></td>
<td>Immediate</td>
<td>Resolve this macro before other macros in the same text.</td>
</tr>
<tr>
<td><code translate="no" v-pre>?</code></td>
<td>Delayed</td>
<td>Resolve this macro after other macros in the same text.</td>
</tr>
<tr>
<td><code translate="no" v-pre>~</code></td>
<td>Re-evaluate</td>
<td>Mark this macro for re-evaluation.</td>
</tr>
<tr>
<td><code translate="no" v-pre>&gt;</code></td>
<td>Filter</td>
<td>Enable pipe-based output filters for this macro.</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="flags-like-prefix-operators">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#flags-like-prefix-operators">#</doc-anchor-trigger>
        <span>Flags-like prefix operators</span>
    </h3>
</doc-anchor-target>
<p>Variable shorthand syntax uses prefix operators (<code translate="no" v-pre>.</code> and <code translate="no" v-pre>$</code>) which behave similarly to flags but are not flags themselves.<br />
See the <doc-anchor-trigger to="#variable-shorthands">Variable Shorthands</doc-anchor-trigger> section for details.</p>
<doc-anchor-target id="preserve-whitespace-flag">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#preserve-whitespace-flag">#</doc-anchor-trigger>
        <span>Preserve Whitespace Flag</span>
    </h3>
</doc-anchor-target>
<p>Use the <code translate="no" v-pre>#</code> flag when you need to preserve all whitespace in scoped content, including leading/trailing newlines and indentation:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ # setvar code }}
    function hello() {
        return &quot;world&quot;;
    }
{{ /setvar }}</code></pre>
</doc-codeblock></div>
<p>Without <code translate="no" v-pre>#</code>, the content would be trimmed and dedented. With <code translate="no" v-pre>#</code>, all whitespace is preserved exactly as written—including the newline after the opening tag and before the closing tag.</p>
<doc-anchor-target id="comments">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#comments">#</doc-anchor-trigger>
        <span>Comments</span>
    </h2>
</doc-anchor-target>
<p>Use the comment macro to add notes that won&#x27;t appear in the output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{// This is a comment and will be removed}}</code></pre>
</doc-codeblock></div>
<p>For multi-line comments, use scoped syntax:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ // }}
  This entire block is a comment.
  It can span multiple lines.
{{ /// }}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="escaping-macros">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#escaping-macros">#</doc-anchor-trigger>
        <span>Escaping Macros</span>
    </h2>
</doc-anchor-target>
<p>To display literal curly braces without macro resolution, escape them with backslashes:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">\{\{notAMacro\}\}</code></pre>
</doc-codeblock></div>
<p>This outputs <code translate="no" v-pre>{{notAMacro}}</code> as plain text.</p>
<doc-anchor-target id="variable-shorthands">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#variable-shorthands">#</doc-anchor-trigger>
        <span>Variable Shorthands</span>
    </h2>
</doc-anchor-target>
<p>Variable shorthands provide a concise syntax for common variable operations. Use <code translate="no" v-pre>.</code> for local variables and <code translate="no" v-pre>$</code> for global variables.</p>
<doc-anchor-target id="variable-shorthands-prefixes">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#variable-shorthands-prefixes">#</doc-anchor-trigger>
        <span>Variable Shorthands Prefixes</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Prefix</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>.</code></td>
<td>Local Variable</td>
<td>Shorthand for local variable operations. Example: <code translate="no" v-pre>{{.myvar}}</code></td>
</tr>
<tr>
<td><code translate="no" v-pre>$</code></td>
<td>Global Variable</td>
<td>Shorthand for global variable operations. Example: <code translate="no" v-pre>{{$myvar}}</code></td>
</tr>
</tbody>
</table>
</div>
<p>These prefix operators have to be placed <strong>immediately before</strong> the variable name, after any optionally appearing <doc-anchor-trigger to="#macro-flags">Macro Flags</doc-anchor-trigger>. They aren&#x27;t considered macro flags, but more indicators that a variable shorthand is being inserted, instead of a macro by name. The prefix operators are not part of the variable name itself, but rather modifiers that change how the variable is accessed.</p>
<doc-anchor-target id="variable-names">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#variable-names">#</doc-anchor-trigger>
        <span>Variable Names</span>
    </h3>
</doc-anchor-target>
<p>Variable names follow the same rules as macro identifiers: start with a letter, followed by letters, digits, underscores, or hyphens. The last character is not allowed to be an underscore or hyphen.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.my-var}}       // Valid
{{.my_var}}       // Valid
{{.myVar123}}     // Valid</code></pre>
</doc-codeblock></div>
<p>If your variable has an identifier that does not match the standard rules, you have to use the full variable macro syntax (e.g. <code translate="no" v-pre>{{getvar::my§var----}}</code>), or rename/move your variable value.</p>
<doc-anchor-target id="nested-macros-in-values">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#nested-macros-in-values">#</doc-anchor-trigger>
        <span>Nested Macros in Values</span>
    </h3>
</doc-anchor-target>
<p>Variable values can contain nested macros:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.greeting = Hello, {{user}}!}}</code></pre>
</doc-codeblock></div>
<p>Resolves to a variable that saves <code translate="no" v-pre>Hello, User!</code> inside. (If <code translate="no" v-pre>{{user}}</code> is named &quot;User&quot;)</p>
<doc-anchor-target id="whitespace-handling">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#whitespace-handling">#</doc-anchor-trigger>
        <span>Whitespace Handling</span>
    </h3>
</doc-anchor-target>
<p>Whitespace around operators is allowed:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ .myvar = spaced value }}
{{ .counter ++ }}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="variable-shorthand-operators">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#variable-shorthand-operators">#</doc-anchor-trigger>
        <span>Variable Shorthand Operators</span>
    </h3>
</doc-anchor-target>
<p>The following operators can be used with variable shorthands. Each operator follows the pattern <code translate="no" v-pre>{{.varName operator value}}</code> or <code translate="no" v-pre>{{$varName operator value}}</code>.</p>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Operator</th>
<th>Name</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(none)</em></td>
<td><doc-anchor-trigger to="#get-variable">Get</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.myvar}}</code></td>
<td>Returns the variable value</td>
</tr>
<tr>
<td><code translate="no" v-pre>=</code></td>
<td><doc-anchor-trigger to="#set-variable">Set</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.myvar = value}}</code></td>
<td>Sets the variable to a value, returns nothing</td>
</tr>
<tr>
<td><code translate="no" v-pre>++</code></td>
<td><doc-anchor-trigger to="#increment">Increment</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.counter++}}</code></td>
<td>Increments by 1, returns new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>--</code></td>
<td><doc-anchor-trigger to="#decrement">Decrement</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.counter--}}</code></td>
<td>Decrements by 1, returns new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>+=</code></td>
<td><doc-anchor-trigger to="#add">Add</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.score += 10}}</code></td>
<td>Adds to variable (numeric or string concatenation), returns nothing</td>
</tr>
<tr>
<td><code translate="no" v-pre>-=</code></td>
<td><doc-anchor-trigger to="#subtract">Subtract</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.health -= 5}}</code></td>
<td>Subtracts from variable (numeric only), returns nothing</td>
</tr>
<tr>
<td><code translate="no" v-pre>||</code></td>
<td><doc-anchor-trigger to="#logical-or">Logical Or</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.name || Guest}}</code></td>
<td>Returns fallback if variable is falsy</td>
</tr>
<tr>
<td><code translate="no" v-pre>??</code></td>
<td><doc-anchor-trigger to="#nullish-coalescing">Nullish Coalescing</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.name ?? Guest}}</code></td>
<td>Returns fallback only if variable is undefined</td>
</tr>
<tr>
<td><code translate="no" v-pre>||=</code></td>
<td><doc-anchor-trigger to="#logical-or-assign">Logical Or Assign</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.name ||= Guest}}</code></td>
<td>Sets value if variable is falsy, returns the new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>??=</code></td>
<td><doc-anchor-trigger to="#nullish-coalescing-assign">Nullish Coalescing Assign</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.name ??= Guest}}</code></td>
<td>Sets value only if variable is undefined, returns the new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>==</code></td>
<td><doc-anchor-trigger to="#equals">Equals</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.status == active}}</code></td>
<td>Compares values, returns <code translate="no" v-pre>&quot;true&quot;</code> or <code translate="no" v-pre>&quot;false&quot;</code></td>
</tr>
<tr>
<td><code translate="no" v-pre>!=</code></td>
<td><doc-anchor-trigger to="#not-equals">Not Equals</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.status != active}}</code></td>
<td>Compares values, returns <code translate="no" v-pre>&quot;true&quot;</code> if not equal</td>
</tr>
<tr>
<td><code translate="no" v-pre>&gt;</code></td>
<td><doc-anchor-trigger to="#greater-than">Greater Than</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.score &gt; 50}}</code></td>
<td>Returns <code translate="no" v-pre>&quot;true&quot;</code> if variable is greater than value</td>
</tr>
<tr>
<td><code translate="no" v-pre>&gt;=</code></td>
<td><doc-anchor-trigger to="#greater-than-or-equal">Greater Than or Equal</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.level &gt;= 10}}</code></td>
<td>Returns <code translate="no" v-pre>&quot;true&quot;</code> if variable is greater than or equal to value</td>
</tr>
<tr>
<td><code translate="no" v-pre>&lt;</code></td>
<td><doc-anchor-trigger to="#less-than">Less Than</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.health &lt; 20}}</code></td>
<td>Returns <code translate="no" v-pre>&quot;true&quot;</code> if variable is less than value</td>
</tr>
<tr>
<td><code translate="no" v-pre>&lt;=</code></td>
<td><doc-anchor-trigger to="#less-than-or-equal">Less Than or Equal</doc-anchor-trigger></td>
<td><code translate="no" v-pre>{{.health &lt;= 0}}</code></td>
<td>Returns <code translate="no" v-pre>&quot;true&quot;</code> if variable is less than or equal to value</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="get-variable">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#get-variable">#</doc-anchor-trigger>
        <span>Get Variable</span>
    </h4>
</doc-anchor-target>
<p>Retrieve variable values with a simple prefix:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.myvar}}       // Get local variable &quot;myvar&quot;
{{$myvar}}       // Get global variable &quot;myvar&quot;</code></pre>
</doc-codeblock></div>
<p>Equivalent to <code translate="no" v-pre>{{getvar::myvar}}</code> and <code translate="no" v-pre>{{getglobalvar::myvar}}</code>.</p>
<doc-anchor-target id="set-variable">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#set-variable">#</doc-anchor-trigger>
        <span>Set Variable</span>
    </h4>
</doc-anchor-target>
<p>Use the <code translate="no" v-pre>=</code> operator to set a variable value:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{ .myvar = Hello World }}     // Set local variable
{{ $myvar = Some value }}      // Set global variable</code></pre>
</doc-codeblock></div>
<p>Equivalent to <code translate="no" v-pre>{{setvar::myvar::Hello World}}</code> and <code translate="no" v-pre>{{setglobalvar::myvar::Hello World}}</code>. Returns an empty string.</p>
<doc-anchor-target id="increment">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#increment">#</doc-anchor-trigger>
        <span>Increment</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>++</code> to increment a numeric variable by 1:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.counter++}}    // Increment local variable, returns new value
{{$counter++}}    // Increment global variable, returns new value</code></pre>
</doc-codeblock></div>
<p>Equivalent to <code translate="no" v-pre>{{incvar counter}}</code> and <code translate="no" v-pre>{{incglobalvar counter}}</code>. Returns the new value after incrementing.</p>
<doc-anchor-target id="decrement">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#decrement">#</doc-anchor-trigger>
        <span>Decrement</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>--</code> to decrement a numeric variable by 1:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.counter--}}    // Decrement local variable, returns new value
{{$counter--}}    // Decrement global variable, returns new value</code></pre>
</doc-codeblock></div>
<p>Equivalent to <code translate="no" v-pre>{{decvar counter}}</code> and <code translate="no" v-pre>{{decglobalvar counter}}</code>. Returns the new value after decrementing.</p>
<doc-anchor-target id="add">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#add">#</doc-anchor-trigger>
        <span>Add</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>+=</code> to add a numeric value to a variable:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.score += 10}}     // Add 10 to local variable
{{$total += 5}}      // Add 5 to global variable</code></pre>
</doc-codeblock></div>
<p>Equivalent to <code translate="no" v-pre>{{addvar::score::10}}</code> and <code translate="no" v-pre>{{addglobalvar::total::5}}</code>. Returns an empty string.</p>
<p>The add operator also supports appending strings to an existing string variable, if neither of them are numbers:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.myvar += {{noop}} | Second block}}   // Resolves to &quot;Content | Second block&quot; when the variable before was &quot;Content&quot;.
                                        // Use `{{noop}}` to be able to add whitespaces, that otherwise would be trimmed automatically.</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="subtract">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#subtract">#</doc-anchor-trigger>
        <span>Subtract</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>-=</code> to subtract a numeric value from a variable:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.health -= 10}}    // Subtract 10 from local variable
{{$points -= 5}}     // Subtract 5 from global variable</code></pre>
</doc-codeblock></div>
<p>Equivalent to <code translate="no" v-pre>{{addvar::score::10}}</code> and <code translate="no" v-pre>{{addglobalvar::total::5}}</code>, but with a negative/inverted number. Returns an empty string.
If the value is not a valid number, a warning is logged and the variable is unchanged.</p>
<doc-anchor-target id="logical-or">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#logical-or">#</doc-anchor-trigger>
        <span>Logical Or</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>||</code> to provide a fallback value when the variable is falsy (empty string, <code translate="no" v-pre>0</code>, <code translate="no" v-pre>false</code>):</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.name || Anonymous}}     // Returns &quot;Anonymous&quot; if .name is empty or falsy
{{$setting || default}}    // Returns &quot;default&quot; if $setting is falsy</code></pre>
</doc-codeblock></div>
<p>Returns the variable value if truthy, otherwise returns the fallback value. The fallback is <strong>only evaluated if needed</strong> (lazy evaluation).</p>
<doc-anchor-target id="nullish-coalescing">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#nullish-coalescing">#</doc-anchor-trigger>
        <span>Nullish Coalescing</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>??</code> to provide a fallback value only when the variable does not exist:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.name ?? Guest}}         // Returns &quot;Guest&quot; only if .name is not defined
{{$config ?? default}}     // Returns &quot;default&quot; only if $config doesn't exist</code></pre>
</doc-codeblock></div>
<p>Unlike <code translate="no" v-pre>||</code>, this returns the variable value even if it&#x27;s falsy (empty string, <code translate="no" v-pre>0</code>, <code translate="no" v-pre>false</code>) — as long as the variable exists. The fallback is <strong>only evaluated if needed</strong> (lazy evaluation).</p>
<doc-anchor-target id="logical-or-assign">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#logical-or-assign">#</doc-anchor-trigger>
        <span>Logical Or Assign</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>||=</code> to set a variable to a value only if it&#x27;s currently falsy:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.name ||= Anonymous}}    // Sets and returns &quot;Anonymous&quot; if .name is falsy
{{$count ||= 0}}           // Sets and returns &quot;0&quot; if $count is falsy</code></pre>
</doc-codeblock></div>
<p>If the variable is already truthy, returns the current value without modification. Returns the final value (either existing or newly set).</p>
<doc-anchor-target id="nullish-coalescing-assign">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#nullish-coalescing-assign">#</doc-anchor-trigger>
        <span>Nullish Coalescing Assign</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>??=</code> to set a variable to a value only if it doesn&#x27;t exist:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.name ??= Guest}}        // Sets and returns &quot;Guest&quot; only if .name is undefined
{{$config ??= default}}    // Sets and returns &quot;default&quot; only if $config doesn't exist</code></pre>
</doc-codeblock></div>
<p>Unlike <code translate="no" v-pre>||=</code>, this preserves falsy values (empty string, <code translate="no" v-pre>0</code>, <code translate="no" v-pre>false</code>) if the variable already exists. Returns the final value (either existing or newly set).</p>
<doc-anchor-target id="equals">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#equals">#</doc-anchor-trigger>
        <span>Equals</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>==</code> to compare a variable value to another value:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.status == active}}      // Returns &quot;true&quot; if .status equals &quot;active&quot;, otherwise &quot;false&quot;
{{$mode == dark}}          // Returns &quot;true&quot; if $mode equals &quot;dark&quot;, otherwise &quot;false&quot;</code></pre>
</doc-codeblock></div>
<p>Performs a string comparison and returns the literal string <code translate="no" v-pre>&quot;true&quot;</code> or <code translate="no" v-pre>&quot;false&quot;</code>.<br />
Treats not existing variables, null variables and empty variables as the same.</p>
<p>Useful in <code translate="no" v-pre>{{if}}</code> conditions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{if {{.status == active}} }}Active mode{{/if}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="not-equals">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#not-equals">#</doc-anchor-trigger>
        <span>Not Equals</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>!=</code> to compare a variable value to another value for inequality:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.status != inactive}}    // Returns &quot;true&quot; if .status is NOT &quot;inactive&quot;, otherwise &quot;false&quot;
{{$mode != light}}         // Returns &quot;true&quot; if $mode is NOT &quot;light&quot;, otherwise &quot;false&quot;</code></pre>
</doc-codeblock></div>
<p>Performs a string comparison and returns <code translate="no" v-pre>&quot;true&quot;</code> if the values are different, <code translate="no" v-pre>&quot;false&quot;</code> if they are equal.<br />
Treats not existing variables, null variables and empty variables as the same.</p>
<p>Useful in <code translate="no" v-pre>{{if}}</code> conditions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{if {{.status != disabled}} }}Feature enabled{{/if}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="greater-than">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#greater-than">#</doc-anchor-trigger>
        <span>Greater Than</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>&gt;</code> to check if a variable&#x27;s numeric value is greater than another value:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.score &gt; 50}}        // Returns &quot;true&quot; if .score is greater than 50
{{$level &gt; 5}}         // Returns &quot;true&quot; if $level is greater than 5</code></pre>
</doc-codeblock></div>
<p>Performs a numeric comparison and returns the literal string <code translate="no" v-pre>&quot;true&quot;</code> or <code translate="no" v-pre>&quot;false&quot;</code>.</p>
<p>Useful in <code translate="no" v-pre>{{if}}</code> conditions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{if {{.score &gt; 100}} }}High score!{{/if}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="greater-than-or-equal">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#greater-than-or-equal">#</doc-anchor-trigger>
        <span>Greater Than or Equal</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>&gt;=</code> to check if a variable&#x27;s numeric value is greater than or equal to another value:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.level &gt;= 10}}       // Returns &quot;true&quot; if .level is at least 10
{{$points &gt;= 100}}     // Returns &quot;true&quot; if $points is 100 or more</code></pre>
</doc-codeblock></div>
<p>Performs a numeric comparison and returns the literal string <code translate="no" v-pre>&quot;true&quot;</code> or <code translate="no" v-pre>&quot;false&quot;</code>.</p>
<p>Useful in <code translate="no" v-pre>{{if}}</code> conditions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{if {{$level &gt;= 10}} }}Unlocked advanced features{{/if}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="less-than">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#less-than">#</doc-anchor-trigger>
        <span>Less Than</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>&lt;</code> to check if a variable&#x27;s numeric value is less than another value:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.health &lt; 20}}       // Returns &quot;true&quot; if .health is below 20
{{$timer &lt; 0}}         // Returns &quot;true&quot; if $timer is negative</code></pre>
</doc-codeblock></div>
<p>Performs a numeric comparison and returns the literal string <code translate="no" v-pre>&quot;true&quot;</code> or <code translate="no" v-pre>&quot;false&quot;</code>.</p>
<p>Useful in <code translate="no" v-pre>{{if}}</code> conditions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{if {{.health &lt; 20}} }}Low health warning!{{/if}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="less-than-or-equal">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#less-than-or-equal">#</doc-anchor-trigger>
        <span>Less Than or Equal</span>
    </h4>
</doc-anchor-target>
<p>Use <code translate="no" v-pre>&lt;=</code> to check if a variable&#x27;s numeric value is less than or equal to another value:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{.health &lt;= 0}}       // Returns &quot;true&quot; if .health is 0 or below
{{$attempts &lt;= 3}}     // Returns &quot;true&quot; if $attempts is 3 or fewer</code></pre>
</doc-codeblock></div>
<p>Performs a numeric comparison and returns the literal string <code translate="no" v-pre>&quot;true&quot;</code> or <code translate="no" v-pre>&quot;false&quot;</code>.</p>
<p>Useful in <code translate="no" v-pre>{{if}}</code> conditions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">{{if {{.health &lt;= 0}} }}Game over{{/if}}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="legacy-syntax">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#legacy-syntax">#</doc-anchor-trigger>
        <span>Legacy Syntax</span>
    </h2>
</doc-anchor-target>
<p>For backwards compatibility, angle bracket markers are still supported:</p>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Legacy</th>
<th>Equivalent Macro</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>&lt;USER&gt;</code></td>
<td><code translate="no" v-pre>{{user}}</code></td>
</tr>
<tr>
<td><code translate="no" v-pre>&lt;BOT&gt;</code></td>
<td><code translate="no" v-pre>{{char}}</code></td>
</tr>
<tr>
<td><code translate="no" v-pre>&lt;CHAR&gt;</code></td>
<td><code translate="no" v-pre>{{char}}</code></td>
</tr>
<tr>
<td><code translate="no" v-pre>&lt;GROUP&gt;</code></td>
<td><code translate="no" v-pre>{{group}}</code></td>
</tr>
<tr>
<td><code translate="no" v-pre>&lt;CHARIFNOTGROUP&gt;</code></td>
<td><code translate="no" v-pre>{{charIfNotGroup}}</code></td>
</tr>
</tbody>
</table>
</div>
<p>These are automatically converted to their macro equivalents during processing.</p>
<blockquote>
<p><strong>Note:</strong> Legacy syntax is not recommended. Use the equivalent <code translate="no" v-pre>{{macro}}</code> syntax instead for new content.</p>
</blockquote>
<doc-anchor-target id="common-macros-by-category">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-macros-by-category">#</doc-anchor-trigger>
        <span>Common Macros by Category</span>
    </h2>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1.5 rounded-tl-lg rounded-bl-lg bg-callout-tip"></div>
    <div class="flex w-full py-4 border border-l-0 rounded-tr-lg rounded-br-lg doc-callout bg-callout-base-bg border-callout-base-border" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-callout-tip" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M7.90625 2.15625C4.50944 2.15625 2.15625 4.58563 2.15625 7.54688C2.15625 8.96138 2.76575 9.88281 3.57075 10.8589L3.87837 11.2226C4.19894 11.6021 4.554 12.0218 4.84581 12.4416C5.25406 13.0324 5.61775 13.7296 5.7385 14.5834C5.76728 14.8608 5.68746 15.1386 5.51579 15.3583C5.34413 15.5781 5.09399 15.7228 4.8179 15.7621C4.5418 15.8013 4.26124 15.7321 4.03512 15.5689C3.809 15.4056 3.65493 15.1612 3.60525 14.8867C3.54775 14.4814 3.37094 14.1004 3.07338 13.6692C2.8306 13.3302 2.57055 13.0039 2.29425 12.6917C2.1735 12.5479 2.04556 12.397 1.909 12.2317C1.00769 11.1406 0 9.72613 0 7.54688C0 3.32062 3.39681 0 7.90625 0C12.4157 0 15.8125 3.32062 15.8125 7.54688C15.8125 9.72613 14.8048 11.1406 13.9035 12.2317C13.7669 12.397 13.639 12.5479 13.5183 12.6903C13.2207 13.0424 12.9677 13.3414 12.7406 13.6692C12.4416 14.1004 12.2662 14.4814 12.2087 14.8867C12.1557 15.1584 12.0003 15.3994 11.7747 15.5598C11.5492 15.7202 11.2706 15.7879 10.9965 15.7488C10.7225 15.7096 10.474 15.5667 10.3023 15.3496C10.1306 15.1325 10.0489 14.8577 10.074 14.582C10.1948 13.7296 10.5584 13.0324 10.9667 12.4416C11.2585 12.0218 11.6136 11.6021 11.9341 11.2226C12.0419 11.0961 12.1454 10.9739 12.2403 10.8589C13.0468 9.88281 13.6562 8.96138 13.6562 7.54688C13.6562 4.58563 11.3031 2.15625 7.90625 2.15625ZM4.67188 17.25H11.1406C11.4266 17.25 11.7008 17.3636 11.903 17.5658C12.1052 17.768 12.2188 18.0422 12.2188 18.3281C12.2188 18.6141 12.1052 18.8883 11.903 19.0905C11.7008 19.2927 11.4266 19.4062 11.1406 19.4062H4.67188C4.38594 19.4062 4.11171 19.2927 3.90953 19.0905C3.70734 18.8883 3.59375 18.6141 3.59375 18.3281C3.59375 18.0422 3.70734 17.768 3.90953 17.5658C4.11171 17.3636 4.38594 17.25 4.67188 17.25ZM5.03125 21.9219C5.03125 21.6359 5.14484 21.3617 5.34703 21.1595C5.54921 20.9573 5.82344 20.8438 6.10938 20.8438H9.70312C9.98906 20.8438 10.2633 20.9573 10.4655 21.1595C10.6677 21.3617 10.7812 21.6359 10.7812 21.9219C10.7812 22.2078 10.6677 22.482 10.4655 22.6842C10.2633 22.8864 9.98906 23 9.70312 23H6.10938C5.82344 23 5.54921 22.8864 5.34703 22.6842C5.14484 22.482 5.03125 22.2078 5.03125 21.9219Z" />
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Use <code translate="no" v-pre>/? macros</code> for the complete list of available macros and their detailed descriptions.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="names--participants">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#names--participants">#</doc-anchor-trigger>
        <span>Names &amp; Participants</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{user}}</code></td>
<td>Current user/persona name</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{char}}</code></td>
<td>Current character name</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{group}}</code></td>
<td>Comma-separated list of group member names (including muted) or character name in solo chats</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{groupNotMuted}}</code></td>
<td>Comma-separated list of group member names excluding muted members</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charIfNotGroup}}</code></td>
<td>Character name (empty in groups)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{notChar}}</code></td>
<td>Comma-separated list of all participants except the current speaker</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="character-card--persona-fields">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#character-card--persona-fields">#</doc-anchor-trigger>
        <span>Character Card &amp; Persona Fields</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{description}}</code></td>
<td>Character description</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{personality}}</code></td>
<td>Character personality</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{scenario}}</code></td>
<td>Character scenario</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{persona}}</code></td>
<td>User persona description</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charPrompt}}</code></td>
<td>Character&#x27;s Main Prompt override</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charInstruction}}</code></td>
<td>Character&#x27;s Post-History Instructions override</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charDepthPrompt}}</code></td>
<td>Character&#x27;s @ Depth Note</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charCreatorNotes}}</code></td>
<td>Creator notes from the character card</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charVersion}}</code></td>
<td>Character&#x27;s version number</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{mesExamples}}</code></td>
<td>Character&#x27;s dialogue examples, formatted for instruct mode</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{mesExamplesRaw}}</code></td>
<td>Unformatted dialogue examples from the character card</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{original}}</code></td>
<td>Original message content for substitution in character prompt overrides</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="chat-history--messages">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#chat-history--messages">#</doc-anchor-trigger>
        <span>Chat History &amp; Messages</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{lastMessage}}</code></td>
<td>Last message in the chat</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{lastMessageId}}</code></td>
<td>Index of the last message in the chat</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{lastUserMessage}}</code></td>
<td>Last user message in the chat</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{lastCharMessage}}</code></td>
<td>Last character/bot message in the chat</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{firstIncludedMessageId}}</code></td>
<td>Index of first message included in current context</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{firstDisplayedMessageId}}</code></td>
<td>Index of the first displayed message in the chat</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{lastSwipeId}}</code></td>
<td>1-based index of the last swipe for the last message</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{currentSwipeId}}</code></td>
<td>1-based index of the current swipe</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{summary}}</code></td>
<td>Latest chat summary from the &quot;Summarize&quot; extension (when available)</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="time--date">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#time--date">#</doc-anchor-trigger>
        <span>Time &amp; Date</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{time}}</code></td>
<td>Current local time</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{time::UTC±(offset)}}</code></td>
<td>Time with UTC offset</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{date}}</code></td>
<td>Current local date in short format</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{weekday}}</code></td>
<td>Current day of the week</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{isotime}}</code></td>
<td>Current time in HH:mm format</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{isodate}}</code></td>
<td>Current date in YYYY-MM-DD format</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{datetimeformat::format}}</code></td>
<td>Custom formatted date/time (e.g., <code translate="no" v-pre>YYYY-MM-DD HH:mm:ss</code>)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{idleDuration}}</code></td>
<td>Human-readable duration since the last user message</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{timeDiff::left::right}}</code></td>
<td>Human-readable difference between two times</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="variables">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#variables">#</doc-anchor-trigger>
        <span>Variables</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{getvar::name}}</code></td>
<td>Get local variable value</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{setvar::name::value}}</code></td>
<td>Set local variable</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{addvar::name::value}}</code></td>
<td>Add value to local variable (numeric or string append)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{incvar::name}}</code></td>
<td>Increment local variable by 1 and return new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{decvar::name}}</code></td>
<td>Decrement local variable by 1 and return new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{hasvar::name}}</code></td>
<td>Check if a local variable exists (returns &quot;true&quot; or &quot;false&quot;)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{deletevar::name}}</code></td>
<td>Delete a local variable</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{getglobalvar::name}}</code></td>
<td>Get global variable value</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{setglobalvar::name::value}}</code></td>
<td>Set global variable</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{addglobalvar::name::value}}</code></td>
<td>Add value to global variable (numeric or string append)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{incglobalvar::name}}</code></td>
<td>Increment global variable by 1 and return new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{decglobalvar::name}}</code></td>
<td>Decrement global variable by 1 and return new value</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{hasglobalvar::name}}</code></td>
<td>Check if a global variable exists (returns &quot;true&quot; or &quot;false&quot;)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{deleteglobalvar::name}}</code></td>
<td>Delete a global variable</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="randomization">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#randomization">#</doc-anchor-trigger>
        <span>Randomization</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{random::a::b::c}}</code></td>
<td>Random selection (re-rolls each time)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{pick::a::b::c}}</code></td>
<td>Stable random selection (consistent per chat and position). Can be rerolled with the <code translate="no" v-pre>/reroll-pick</code> command</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{roll::1d20}}</code></td>
<td>Dice roll using droll syntax</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="runtime-state">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#runtime-state">#</doc-anchor-trigger>
        <span>Runtime State</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{maxPrompt}}</code></td>
<td>Maximum prompt context size</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{model}}</code></td>
<td>Model name for the currently selected API</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{isMobile}}</code></td>
<td>&quot;true&quot; if running in mobile environment, &quot;false&quot; otherwise</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{lastGenerationType}}</code></td>
<td>Type of last queued generation request (e.g., &quot;normal&quot;, &quot;impersonate&quot;, &quot;regenerate&quot;, &quot;quiet&quot;, &quot;swipe&quot;, &quot;continue&quot;)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{hasExtension::name}}</code></td>
<td>Check if an extension is active (returns &quot;true&quot; or &quot;false&quot;). Matches by extension name, case-insensitive</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="prompt-templates">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#prompt-templates">#</doc-anchor-trigger>
        <span>Prompt Templates</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{systemPrompt}}</code></td>
<td>Active system prompt text (optionally overridden by character)</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{defaultSystemPrompt}}</code></td>
<td>Default system prompt</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{authorsNote}}</code></td>
<td>Contents of the Author&#x27;s Note</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charAuthorsNote}}</code></td>
<td>Contents of the Character Author&#x27;s Note</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{defaultAuthorsNote}}</code></td>
<td>Contents of the Default Author&#x27;s Note</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructStoryStringPrefix}}</code></td>
<td>Instruct story string prefix</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructStoryStringSuffix}}</code></td>
<td>Instruct story string suffix</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructUserPrefix}}</code></td>
<td>Instruct input/user prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructUserSuffix}}</code></td>
<td>Instruct input/user suffix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructAssistantPrefix}}</code></td>
<td>Instruct output/assistant prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructAssistantSuffix}}</code></td>
<td>Instruct output/assistant suffix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructSeparator}}</code></td>
<td>Instruct separator sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructSystemPrefix}}</code></td>
<td>Instruct system prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructSystemSuffix}}</code></td>
<td>Instruct system suffix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructFirstAssistantPrefix}}</code></td>
<td>Instruct first assistant/output prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructLastAssistantPrefix}}</code></td>
<td>Instruct last assistant/output prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructFirstUserPrefix}}</code></td>
<td>Instruct first user/input prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructLastUserPrefix}}</code></td>
<td>Instruct last user/input prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructStop}}</code></td>
<td>Instruct stop sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructUserFiller}}</code></td>
<td>Instruct user alignment filler</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{instructSystemInstructionPrefix}}</code></td>
<td>Instruct system instruction prefix sequence</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{chatSeparator}}</code></td>
<td>Separator between example chat blocks in text completion prompts</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{chatStart}}</code></td>
<td>Chat start marker in text completion prompts</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{reasoningPrefix}}</code></td>
<td>Prefix string used before reasoning blocks</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{reasoningSuffix}}</code></td>
<td>Suffix string used after reasoning blocks</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{reasoningSeparator}}</code></td>
<td>Separator between content and response</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charPrefix}}</code></td>
<td>Character&#x27;s positive Image Generation prompt prefix</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{charNegativePrefix}}</code></td>
<td>Character&#x27;s negative Image Generation prompt prefix</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="utility">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#utility">#</doc-anchor-trigger>
        <span>Utility</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code translate="no" v-pre>{{newline}}</code></td>
<td>Insert newline character</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{newline::count}}</code></td>
<td>Insert multiple newlines</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{space}}</code></td>
<td>Insert space character</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{space::count}}</code></td>
<td>Insert multiple spaces</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{noop}}</code></td>
<td>Does nothing, produces empty string</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{trim}}</code></td>
<td>Remove surrounding newlines</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{reverse::text}}</code></td>
<td>Reverse a string</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{input}}</code></td>
<td>Current chat input field content</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{banned::word}}</code></td>
<td>Ban a word for Text Completion backend</td>
</tr>
<tr>
<td><code translate="no" v-pre>{{outlet::key}}</code></td>
<td>Return world info outlet prompt for a given outlet key</td>
</tr>
</tbody>
</table>
</div>

                
                <!-- Required only on API pages -->
                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
            </div>
            <footer id="retype-content-footer" class="clear-both">
                <div class="flex flex-wrap items-center justify-between mt-14">
                    <a id="retype-edit-this-page" class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-body-link font-body-link hover:text-body-link-hover hover:underline" href="https://github.com/SillyTavern/SillyTavern-Docs/edit/main/Usage/macros.md" target="_blank" rel="noopener">
                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                        <span>Edit this page</span>
                    </a>
                </div>
            
                <nav id="retype-nextprev" class="print:hidden flex mt-14">
                    <div class="w-1/2">
                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../../usage/prompts/reasoning/">
                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                            <span>
                                <span class="block text-xs font-normal text-base-text-muted">Previous</span>
                                <span class="block mt-1">Reasoning</span>
                            </span>
                        </a>
                    </div>
            
                    <div class="w-1/2">
                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../../usage/core-concepts/worldinfo/">
                            <span>
                                <span class="block text-xs font-normal text-right text-base-text-muted">Next</span>
                                <span class="block mt-1">World Info</span>
                            </span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                        </a>
                    </div>
                </nav>
            </footer>
        </main>

        <div id="retype-page-footer" class="print:border-none border-t border-base-border pt-6 mb-8">
            <footer class="flex flex-wrap items-center justify-between print:justify-center">
                <div id="retype-footer-links" class="print:hidden">
                    <ul class="flex flex-wrap items-center text-sm">
                    </ul>
                </div>
                <div id="retype-copyright" class="print:justify-center py-2 text-footer-text font-footer-link text-sm leading-relaxed"><p>© Copyright 2026. All rights reserved.</p></div>
            </footer>
        </div>
    </div>

    <!-- Rendered if sidebar right is enabled -->
    <!-- Sidebar right skeleton-->
    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-sidebar-right-bg border-sidebar-right-border lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:translate-x-0 sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton">
        <div class="pl-5">
            <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
            <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
            <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
        </div>
    </div>

    <!-- User should be able to hide sidebar right -->
    <doc-sidebar-right v-cloak></doc-sidebar-right>
</div>

        </div>
    </div>

    <doc-search-mobile></doc-search-mobile>
    <doc-back-to-top></doc-back-to-top>
</div>


    <div id="retype-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Macros", level: 3, icon: "file", hasPrism: false, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
