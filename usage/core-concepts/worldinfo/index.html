<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0NTJMWH0TW1"></script>
    <script data-cfasync="false">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-0NTJMWH0TW1');</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.7.0.798897289310">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.7.0">

    <!-- Primary Meta Tags -->
    <title>World Info | docs.ST.app</title>
    <meta name="title" content="World Info | docs.ST.app">
    <meta name="description" content="World Info (also known as Lorebooks or Memory Books) is a powerful tool available in ST to insert prompts dynamically into your chat to help guide...">

    <!-- Canonical -->
    <link rel="canonical" href="https://docs.sillytavern.app/usage/core-concepts/worldinfo/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.sillytavern.app/usage/core-concepts/worldinfo/">
    <meta property="og:title" content="World Info | docs.ST.app">
    <meta property="og:description" content="World Info (also known as Lorebooks or Memory Books) is a powerful tool available in ST to insert prompts dynamically into your chat to help guide...">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.sillytavern.app/usage/core-concepts/worldinfo/">
    <meta property="twitter:title" content="World Info | docs.ST.app">
    <meta property="twitter:description" content="World Info (also known as Lorebooks or Memory Books) is a powerful tool available in ST to insert prompts dynamically into your chat to help guide...">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../../resources/css/retype.css?v=3.7.0.798897289310" rel="stylesheet">

    <script data-cfasync="false" src="../../../resources/js/config.js?v=3.7.0.798897289310" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../../resources/js/retype.js?v=3.7.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../../resources/js/lunr.js?v=3.7.0.798897289310" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../../resources/js/prism.js?v=3.7.0.798897289310" defer></script>

    <style>
        a {
            color: brown !important;
        }

        .dark a {
            color: rgb(223, 151, 18) !important;
        }

        body {
            font-family: Noto Sans, sans-serif;
        }

        .callout {
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #d2d6dc;
            border-radius: 0.375rem;
        }

        .callout p {
            margin-bottom: 0.5rem !important;
            overflow: hidden;
        }

        .callout p:last-child {
            margin-bottom: 0 !important;
        }

        .callout .fa-fw {
            margin: 1rem 0.5rem 1rem 0;
            color: slategrey;
        }

        .docs-markdown .codeblock code,
        .docs-markdown .codeblock pre {
            white-space: pre-wrap;
        }
    </style>
    <link href="/static/webfonts/NotoSans/stylesheet.css" rel="stylesheet" />
    <link href="/static/css/fontawesome.min.css" rel="stylesheet" />
    <link href="/static/css/solid.min.css" rel="stylesheet" />
    <link href="/static/css/brands.min.css" rel="stylesheet" />

</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../../" class="flex items-center leading-snug text-xl">
                            <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                                <img class="max-h-10 dark:hidden md:inline-block" src="../../../static/logo.png">
                                <img class="max-h-10 hidden dark:inline-block" src="../../../static/logo.png">
                            </span>
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">SillyTavern Documentation</span>
                        </a>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/SillyTavern/SillyTavern">GitHub</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/sillytavern">Discord</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.reddit.com/r/SillyTavernAI/">Reddit</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/SillyTavern/SillyTavern">GitHub</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/sillytavern">Discord</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.reddit.com/r/SillyTavernAI/">Reddit</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="world-info" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#world-info">#</doc-anchor-trigger>
        <span>World Info</span>
    </h1>
</doc-anchor-target>
<p><strong>World Info (also known as Lorebooks or Memory Books) is a powerful tool available in ST to insert prompts dynamically into your chat to help guide the AI replies.</strong></p>
<p>Commonly, World Info (WI for short) is used to  enhance the AI&#x27;s understanding of the details in your fictional world, however you could use a World Info entry to insert ANYTHING that you would like to insert into the prompt.</p>
<p>It functions like a dynamic dictionary that only inserts relevant information from World Info entries when keywords associated with the entries are present in the message text.</p>
<p>The SillyTavern engine activates and seamlessly integrates the appropriate lore into the prompt, providing background information to the AI.</p>
<p><em>It is important to note that while World Info helps guide the AI toward the desired content, it does not guarantee its appearance in the generated output messages. That depends on how good your model is at making use of additional information!</em></p>
<doc-anchor-target id="pro-tips">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#pro-tips">#</doc-anchor-trigger>
        <span>Pro Tips</span>
    </h2>
</doc-anchor-target>
<ul>
<li>The World Info engine is a very powerful prompt management tool. Don&#x27;t fixate on adding character lore alone, feel free to experiment.</li>
<li>Activation keywords, titles, and other information that is not in the <strong>Content</strong> field is not inserted into context, so each World Info entry should have a comprehensive, standalone description.</li>
<li>To create rich and detailed world lore, entries can be interlinked and reference one another by using recursive activation. See more on <doc-anchor-trigger to="#recursive-scanning">Recursion</doc-anchor-trigger> below.</li>
<li>SillyTavern offers flexible context budgeting for inserted background information. To conserve prompt tokens, it is advisable to keep entry contents concise.</li>
</ul>
<doc-anchor-target id="further-reading">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#further-reading">#</doc-anchor-trigger>
        <span>Further reading</span>
    </h2>
</doc-anchor-target>
<ul>
<li><a href="https://rentry.co/world-info-encyclopedia">World Info Encyclopedia</a>: Exhaustive in-depth guide to World Info and Lorebooks. By kingbri, Alicat, Trappu.</li>
</ul>
<doc-anchor-target id="character-lore">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#character-lore">#</doc-anchor-trigger>
        <span>Character Lore</span>
    </h2>
</doc-anchor-target>
<p>Optionally, one World Info file could be assigned to a character to serve as a dedicated lore source across all chats with that character (including groups).</p>
<p>To do that, navigate to a Character Management panel and click a globe button, then pick World Info from a dropdown list and click &quot;Ok&quot;.</p>
<p>To unbind or change character lore, Shift-click the globe button. If on mobile, click &quot;More...&quot; and then &quot;Link World Info&quot;.</p>
<doc-anchor-target id="character-lore-insertion-strategy">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#character-lore-insertion-strategy">#</doc-anchor-trigger>
        <span>Character Lore Insertion Strategy</span>
    </h3>
</doc-anchor-target>
<p>When generating an AI reply, entries from the character World Info will be combined with the entries from a global World Info selector using one of the following strategies:</p>
<doc-anchor-target id="sorted-evenly-default">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#sorted-evenly-default">#</doc-anchor-trigger>
        <span>Sorted Evenly (default)</span>
    </h4>
</doc-anchor-target>
<p>All entries will be sorted according to their Insertion Order as if they a part of one big file, ignoring the source.</p>
<doc-anchor-target id="character-lore-first">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#character-lore-first">#</doc-anchor-trigger>
        <span>Character Lore First</span>
    </h4>
</doc-anchor-target>
<p>Entries from the Character World Info would be included first by their Insertion Order, then entries from the Global World Info.</p>
<doc-anchor-target id="global-lore-first">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#global-lore-first">#</doc-anchor-trigger>
        <span>Global Lore First</span>
    </h4>
</doc-anchor-target>
<p>Entries from the Global World Info Info would be included first by their Insertion Order, then entries from the Character World Info.</p>
<doc-anchor-target id="world-info-entry">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#world-info-entry">#</doc-anchor-trigger>
        <span>World Info Entry</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="key">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#key">#</doc-anchor-trigger>
        <span>Key</span>
    </h4>
</doc-anchor-target>
<p>A list of keywords that trigger the activation of a World Info entry. Keys are not case-sensitive by default (this is <doc-anchor-trigger to="#case-sensitive-keys">configurable</doc-anchor-trigger>).</p>
<doc-anchor-target id="regular-expression-regex-as-keys">
    <h5>
        <doc-anchor-trigger class="header-anchor-trigger" to="#regular-expression-regex-as-keys">#</doc-anchor-trigger>
        <span>Regular Expression (Regex) as Keys</span>
    </h5>
</doc-anchor-target>
<p>Keys allow a more flexible approach to matching by supporting regex. This makes it possible to match more dynamic content with optional words or characters, spacing, and all the other utilities that regex provides.<br />
If a defined key is a valid regex (Javascript regex style, with <code v-pre>/</code> as delimiters. All flags are allowed), it will be treated as such when checking whether an entry should be triggered. Multiple regexes can be entered as separate keys and will work alongside each other. Inside a regex, commas are possible. Plaintext keys do not support commas, as they are treated as key separators.</p>
<p>An example of a use-case for advanced regex matching:<br />
An entry/instruction that should be inserted, when char is doing a weather-related action</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">/(?:{{char}}|he|she) (?:is talking about|is noticing|is checking whether|observes) (?:the )?(rainy weather|heavy wind|it is going to rain|cloudy sky)/i</code></pre>
</doc-codeblock></div>
<p>For more information on Regex syntax and possibilities: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions">Regular expressions - JavaScript | MDN</a></p>
<doc-anchor-target id="advanced-regex-per-message-matching">
    <h6>
        <doc-anchor-trigger class="header-anchor-trigger" to="#advanced-regex-per-message-matching">#</doc-anchor-trigger>
        <span>Advanced Regex Per-Message Matching</span>
    </h6>
</doc-anchor-target>
<p>ST prefixes every chat message in the WI scan buffer with <code v-pre>character name:</code> and after v1.12.6, concatenates prepends them using the character value 1 (<code v-pre>\x01</code>).<br />
This means you can match specific input or output from a certain character using a regex tied to that separation character.</p>
<p>For example, to match only the user saying &quot;hello&quot;, you could use the following regex:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">/\x01{{user}}:[^\x01]*?hello/</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="key-input">
    <h5>
        <doc-anchor-trigger class="header-anchor-trigger" to="#key-input">#</doc-anchor-trigger>
        <span>Key Input</span>
    </h5>
</doc-anchor-target>
<p>There are two modes to enter keywords, each with a slightly different UI. In <span class="docs-emoji">&#x2328;&#xFE0F;</span> <em>plaintext mode</em> (default), keys can be entered as a comma-separated list in a single text field. Regexes can be included too, but they don&#x27;t have any special highlighting. In <span class="docs-emoji">&#x2728;</span> <em>fancy mode</em>, the keys appear as separate elements and regexes will be highlighted as such. The control supports editing and deleting keys. The mode can be switched via the inline button inside the input control.</p>
<doc-anchor-target id="optional-filter">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#optional-filter">#</doc-anchor-trigger>
        <span>Optional Filter</span>
    </h4>
</doc-anchor-target>
<p>A list of supplementary keywords that are used in conjunction with the main keywords. See <doc-anchor-trigger to="#optional-filter-1">Optional Filter</doc-anchor-trigger>. These keys also support <doc-anchor-trigger to="#regular-expression-regex-as-keys">regex</doc-anchor-trigger>.</p>
<doc-anchor-target id="entry-content">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#entry-content">#</doc-anchor-trigger>
        <span>Entry Content</span>
    </h4>
</doc-anchor-target>
<p>The text that is inserted into the prompt upon entry activation.</p>
<doc-anchor-target id="insertion-order">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#insertion-order">#</doc-anchor-trigger>
        <span>Insertion Order</span>
    </h4>
</doc-anchor-target>
<p>Numeric value. Defines a priority of the entry if multiple were activated at once. Entries with higher order numbers will be inserted closer to the end of the context as they will have more impact on the output.</p>
<doc-anchor-target id="insertion-position">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#insertion-position">#</doc-anchor-trigger>
        <span>Insertion Position</span>
    </h4>
</doc-anchor-target>
<ul>
<li><strong>Before Char Defs:</strong> World Info entry is inserted before the character&#x27;s description and scenario. Has a moderate impact on the conversation.</li>
<li><strong>After Char Defs:</strong> World Info entry is inserted after the character&#x27;s description and scenario. Has a greater impact on the conversation.</li>
<li><strong>Before Example Messages:</strong> The World Info entry is parsed as an example dialogue block and inserted before the examples provided by the character card.</li>
<li><strong>After Example Messages:</strong> The World Info entry is parsed as an example dialogue block and inserted after the examples provided by the character card.</li>
<li><strong>Top of AN:</strong> World Info entry is inserted at the top of Author&#x27;s Note content. Has a variable impact depending on the Author&#x27;s Note position.</li>
<li><strong>Bottom of AN:</strong> World Info entry is inserted at the bottom of Author&#x27;s Note content. Has a variable impact depending on the Author&#x27;s Note position.</li>
<li><strong>@ D:</strong> World Info entry is inserted at a specific depth in the chat (Depth 0 being the bottom of the prompt).
<ul>
<li><span class="docs-emoji">&#x2699;&#xFE0F;</span> - as a system role message</li>
<li><span class="docs-emoji">&#x1F464;</span> - as a user role message</li>
<li><span class="docs-emoji">&#x1F916;</span> - as an assistant role message</li>
</ul>
</li>
</ul>
<p>Example Message entries will be formatted according to the prompt-building settings: Instruct Mode or Chat Completion prompt manager. They also follow the Example Messages Behavior rules: being gradually pushed out on full context, always kept, or disabled altogether.</p>
<p>If your Author&#x27;s Note is disabled (Insertion Frequency = 0), World Info entries in A/N positions will be ignored!</p>
<doc-anchor-target id="entry-title--memo">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#entry-title--memo">#</doc-anchor-trigger>
        <span>Entry Title / Memo</span>
    </h4>
</doc-anchor-target>
<p>A text field for your convenience to label your entries, which is not utilized by the AI or any of the trigger logics.</p>
<p>If empty, can be backfilled using the entries&#x27; first key by clicking on the &quot;Fill empty memos&quot; button.</p>
<doc-anchor-target id="strategy">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#strategy">#</doc-anchor-trigger>
        <span>Strategy</span>
    </h4>
</doc-anchor-target>
<ol>
<li><span class="docs-emoji">&#x1F535;</span> (Blue Circle) = The entry would always be present in the prompt.</li>
<li><span class="docs-emoji">&#x1F7E2;</span> (Green Circle) = The entry will be triggered only in the presence of the keyword.</li>
<li><span class="docs-emoji">&#x1F517;</span> (Chain Link) = The entry is allowed to be inserted by embedding similarity.</li>
</ol>
<p>Each Entry also has a toggle that allows you to enable or disable the entry.</p>
<doc-anchor-target id="optional-filter-1">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#optional-filter-1">#</doc-anchor-trigger>
        <span>Optional Filter</span>
    </h4>
</doc-anchor-target>
<p>Comma-separated list of additional keywords in conjunction with the primary key.
If no arguments are provided, this flag is ignored.
Supports logic for AND ANY, NOT ANY, or NOT ALL</p>
<ol>
<li>AND ANY = Activates the entry only if the primary key and Any one of the optional filter keys are in scanned context.</li>
<li>AND ALL = Activates the entry only if the primary key and ALL of the optional filter keys are present.</li>
<li>NOT ANY = Activates the entry only if the primary key and None of the optional filter keys are in scanned context.</li>
<li>NOT ALL = Prevents activation of the entry despite primary key trigger, if all of the optional filters are in scanned context.</li>
</ol>
<doc-anchor-target id="probability-trigger-">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#probability-trigger-">#</doc-anchor-trigger>
        <span>Probability (Trigger %)</span>
    </h4>
</doc-anchor-target>
<p>This value acts like an additional filter that adds a chance for the entry NOT to be inserted when it is activated by any means (constant, primary key, recursion).</p>
<ol>
<li>Probability = 100 means that the entry will be inserted on every activation.</li>
<li>Probability = 50 means that the entry will be inserted with a 1:1 chance.</li>
<li>Probability = 0 means that the entry will NOT be inserted (essentially disabling it).</li>
</ol>
<p>Use this to create random events in your chats. For example, every message could have a 1% chance of waking up an Elder God if its name is mentioned in the message.</p>
<doc-anchor-target id="inclusion-group">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#inclusion-group">#</doc-anchor-trigger>
        <span>Inclusion Group</span>
    </h4>
</doc-anchor-target>
<p>Inclusion groups control how entries are selected when multiple entries with the same group label are triggered simultaneously. If multiple entries having the same group label were activated, only one will be inserted into the prompt.</p>
<p>By default, the chosen entry is selected randomly based on their Group Weight (default is 100 points) — the higher the number, the higher the probability of selection. This allows for a random selection among the triggered entries, adding an element of surprise and variety to interactions.</p>
<p>A single entry can be part of multiple inclusion groups if they are defined as a comma-separated list. The same logic as explained above will apply. If that entry is triggered, it will <em>disable</em> all other entries that are part of any of its groups. Therefore, if any of the groups are activated, this entry will not be activated.</p>
<doc-anchor-target id="prioritize-inclusion">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#prioritize-inclusion">#</doc-anchor-trigger>
        <span>Prioritize Inclusion</span>
    </h4>
</doc-anchor-target>
<p>To provide more control over which entries are activated via <doc-anchor-trigger to="#inclusion-group">Inclusion Group</doc-anchor-trigger>, you can use the &#x27;Prioritize Inclusion&#x27; setting. This option allows you to specify deterministically which entry to choose instead of randomly rolling Group Weight chances.</p>
<p>If multiple entries having the same group label and this setting turned on were activated, the one with the highest &#x27;Order&#x27; value will be selected. This is useful for creating fallback sequences via inclusion groups. For example to prioritize low-depth entries with more emphasis, or to choose a specific instruction on setting the scene over another if both are valid.</p>
<doc-anchor-target id="use-group-scoring">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#use-group-scoring">#</doc-anchor-trigger>
        <span>Use Group Scoring</span>
    </h4>
</doc-anchor-target>
<p>When this setting is enabled globally or per entry, the number of activated entry keys determines the group winner selection. Only the subset of a group with the highest number of key matches will be left to be activated by Group Weight or Inclusion Priority - the rest will be deactivated and removed from the group.</p>
<p>Use this to give more specificity for individual entries in large groups. For example, they can have a common key and a specific key. A random entry will be inserted when a specific key is not provided, and vice versa.</p>
<p>The score calculation logic for primary keys is 1 match = 1 point.</p>
<p>For secondary keys, the interaction depends on the chosen Selective Logic:</p>
<ol>
<li>AND ANY: 1 secondary match = 1 point.</li>
<li>AND ALL: 1 point for every secondary key if they all match.</li>
<li>NOT ANY and NOT ALL: no change.</li>
</ol>
<p>Example:</p>
<ul>
<li>Entry 1. Keys: song, sing, Black Cat. Group: songs</li>
<li>Entry 2. Keys: song, sing, Ghosts. Group: songs</li>
</ul>
<p>The input <code v-pre>sing me a song</code> can activate either entry (both activated 2 keys), but <code v-pre>sing me a song about Ghosts</code> will activate only Entry 2 (activated 3 keys).</p>
<doc-anchor-target id="automation-id">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#automation-id">#</doc-anchor-trigger>
        <span>Automation ID</span>
    </h4>
</doc-anchor-target>
<p>Allows to integrate World Info entries with <a href="../../st-script/">STscripts</a> from Quick Replies extension. If both the quick reply command and the WI entry have the same Automation ID, the command will be executed automatically when the entry with a matching ID is activated.</p>
<p>Automations are executed in the order they are triggered, adhering to your designated sorting strategy, combining the <doc-anchor-trigger to="#character-lore-insertion-strategy">Character Lore Insertion Strategy</doc-anchor-trigger> with the &#x27;Priority&#x27; sorting. Which leads to <doc-anchor-trigger to="#strategy">Blue Circle</doc-anchor-trigger> entries processed first, followed by others in their specified &#x27;Order&#x27;. Recursively triggered entries will be processed after in the same order.</p>
<p>The script command will run only once if multiple entries with the same Automation ID are activated.</p>
<doc-anchor-target id="vector-storage-matching">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#vector-storage-matching">#</doc-anchor-trigger>
        <span>Vector Storage Matching</span>
    </h2>
</doc-anchor-target>
<p>The Vector Storage extension provides an alternative to keyword matching by using the similarity between the recent chat messages and World Info entry contents.</p>
<p>To enable and use this, the following prerequisites need to be met:</p>
<ol>
<li>Vector Storage extension is enabled and is configured to use one of the available embedding sources.</li>
<li>The &quot;Enable for World Info&quot; checkbox is ticked in the Vector Storage extension settings.</li>
<li>Either the World Info entries that are allowed for keyless matching have the &quot;Vectorized&quot; (<span class="docs-emoji">&#x1F517;</span>) status or the &quot;Enabled for all entries&quot; option is checked in the Vector Storage settings.</li>
</ol>
<p>The choice of the vectorization model in the extension and the theoretical meaning behind the term &quot;embeddings&quot; won&#x27;t be covered here. Check out the <a href="../data-bank/#vector-storage">Data Bank</a> guide if you require more info on this topic.</p>
<p>Vector Storage matching adheres to this set of rules:</p>
<ul>
<li>The maximum number of entries that are allowed to be matched with the Vector Storage can be adjusted with the &quot;Max Entries&quot; setting. This number only sets the limit and does not influence the token budget set in the activation settings for World Info. All of the budgeting rules still apply.</li>
<li>This feature only replaces the check for keywords. All additional checks must be met for the entry to be inserted: trigger%, character filters, inclusion groups, etc.</li>
<li>The &quot;Scan Depth&quot; setting from Activation Settings or entry overrides is not used. The Vector Storage &quot;Query messages&quot; value is utilized instead to get the text to match against. This allows for a configuration like &quot;Scan Depth&quot; set to 0, so no regular keyword matches will be made, but entries still can be activated by vectors.</li>
<li>A &quot;Vectorized&quot; status is only an additional marker. The entry would still behave like a normal, enabled, non-constant record that will be activated by keywords if they are set. Remove the keywords if you want them to be activated only by vectors.</li>
</ul>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-300"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-300" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Note</h5>
<p>Since the retrieval quality depends entirely on the outputs of the embedding model, it&#x27;s impossible to predict exactly what entries will be inserted. If you want deterministic and predictable results, stick to keyword matching.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="timed-effects">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#timed-effects">#</doc-anchor-trigger>
        <span>Timed Effects</span>
    </h2>
</doc-anchor-target>
<p>Usually, World Info evaluation is stateless, meaning that the result of the evaluation is the same, only depending on the current chat context. However, with the introduction of Timed Effects, you can create entries that have an activation delay, stay active after being triggered, or can&#x27;t be triggered after the activation.</p>
<doc-anchor-target id="timed-effects-rules">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#timed-effects-rules">#</doc-anchor-trigger>
        <span>Timed Effects Rules</span>
    </h3>
</doc-anchor-target>
<ol>
<li>The time frames for the effects are measured in messages (not pairs of messages/exchanges), with 0 meaning there is no effect.</li>
<li>Effects only apply in the chat where the entry was activated. Branches inherit the state of the parent chat.</li>
<li>Active timed effects are removed if the chat doesn&#x27;t advance, e.g. if the last message was swiped or deleted.</li>
<li>Making any changes to the entry that is currently on timed effect will cause the effect to be forcibly removed.</li>
<li>Consequent triggering of keywords does not refresh the effect duration if it&#x27;s already active.</li>
</ol>
<doc-anchor-target id="types-of-timed-effects">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#types-of-timed-effects">#</doc-anchor-trigger>
        <span>Types of Timed Effects</span>
    </h3>
</doc-anchor-target>
<ol>
<li>Sticky - the entry stays active for N messages after being activated. Stickied entries ignore probability checks on consequent scans until they expire.</li>
<li>Cooldown - the entry can&#x27;t be activated for N messages after being activated. Can be used together with sticky: the entry goes on cooldown when the sticky duration ends.</li>
<li>Delay - the entry can&#x27;t be activated unless there are at least N messages in the chat at the moment of evaluation.
<ul>
<li>Delay = 0 -&gt; The entry can be activated at any time.</li>
<li>Delay = 1 -&gt; The entry can&#x27;t be activated if the chat is empty (no greeting).</li>
<li>Delay = 2 -&gt; The entry can&#x27;t be activated if there is zero or only one message in the chat, etc.</li>
</ul>
</li>
</ol>
<doc-anchor-target id="timed-effects-example">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#timed-effects-example">#</doc-anchor-trigger>
        <span>Timed Effects Example</span>
    </h3>
</doc-anchor-target>
<p>Entry configuration: sticky = 3, cooldown = 2, delay = 2.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">Message 0: delay
Message 1: entry activated
Message 2: sticky
Message 3: sticky
Message 4: sticky
Message 5: cooldown
Message 6: cooldown
Message 7: entry can be activated again</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="activation-settings">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#activation-settings">#</doc-anchor-trigger>
        <span>Activation Settings</span>
    </h2>
</doc-anchor-target>
<p>Collapsible menu at the top of the World Info screen.</p>
<doc-anchor-target id="scan-depth">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#scan-depth">#</doc-anchor-trigger>
        <span>Scan Depth</span>
    </h3>
</doc-anchor-target>
<blockquote>
<p>Can be overridden on an entry level.</p>
</blockquote>
<p>Defines how many messages in the chat history should be scanned for World Info keys.</p>
<ul>
<li>If set to 0, then only recursed entries and Author&#x27;s Note are evaluated.</li>
<li>If set to 1, then SillyTavern only scans the last message.</li>
<li>2 = two last messages, etc.</li>
</ul>
<doc-anchor-target id="include-names">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#include-names">#</doc-anchor-trigger>
        <span>Include Names</span>
    </h3>
</doc-anchor-target>
<p>Defines if the names of the chat participants should be included in the scanned text buffer as message prefixes. This allows activating entries that use names as keywords without directly mentioning the names in messages.</p>
<p>See an example of the text to be scanned below, assuming the chat participants are named Alice and Bob.</p>
<p>Enabled (default):</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">Alice: Hello! Good to see you.
Bob: How is the weather today?</code></pre>
</doc-codeblock></div>
<p>Disabled:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">Hello! Good to see you.
How is the weather today?</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="context---budget">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#context---budget">#</doc-anchor-trigger>
        <span>Context % / Budget</span>
    </h3>
</doc-anchor-target>
<p><strong>Defines how many tokens could be used by World Info entries at once.</strong>
You can define a threshold relative to your API&#x27;s max-context settings (Context %) or an objective token threshold (Budget)</p>
<p>If the budget is exhausted, then no more entries are activated even if the keys are present in the prompt.</p>
<p>Constant entries will be inserted first. Then entries with higher order numbers.</p>
<p>Entries inserted by directly mentioning their keys have higher priority than those that were mentioned in other entries&#x27; contents.</p>
<doc-anchor-target id="min-activations">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#min-activations">#</doc-anchor-trigger>
        <span>Min Activations</span>
    </h3>
</doc-anchor-target>
<p><strong>This setting is mutually exclusive with Max Recursion Steps.</strong></p>
<p>Minimum Activations: If set to a non-zero value, this will disregard the limitation of &quot;scan-depth&quot;, seeking all of the chat log backward from the latest message for keywords until as many entries as specified in min activations have been triggered. This will still be limited by the Max Depth setting or your overall Budget cap.</p>
<p><em>Additional scan sweeps triggered by Min Activations will not check entries added by recursion on previous steps. Only chat messages and extension prompts can trigger these additional activations. However, the entries activated by Min Activations can trigger other entries as usual.</em></p>
<doc-anchor-target id="max-depth">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#max-depth">#</doc-anchor-trigger>
        <span>Max Depth</span>
    </h3>
</doc-anchor-target>
<p>Maximum Depth to scan for when using the Min Activations setting.</p>
<doc-anchor-target id="recursive-scanning">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#recursive-scanning">#</doc-anchor-trigger>
        <span>Recursive scanning</span>
    </h3>
</doc-anchor-target>
<p>Recursive scanning allows for entries to activate other entries or be activated by others, enabling complex interactions and dependencies between different World Info entries. This feature can significantly enhance the dynamic nature of your creative scenarios.<br />
Whether recursive scanning is enabled can be controlled with the global setting <strong>Recursive Scan</strong>.<br />
There are three options available to control recursion for each entry:</p>
<ul>
<li><p><strong>Non-recursable</strong>: When this checkbox is selected, the entry will not be activated by other entries. This is useful for static information that should not change or be influenced by other world info entries.</p>
</li>
<li><p><strong>Prevent further recursion</strong>: Selecting this option ensures that once this entry is activated, it will not trigger any other entries. This is helpful to avoid unintended chains of activations.</p>
</li>
<li><p><strong>Delay until recursion</strong>: This entry will only be activated during recursive checks, meaning it won&#x27;t be triggered in the initial pass but can be activated by other entries that have recursion enabled. Now, with the added <strong>Recursion Level</strong> for those delays, entries are grouped by levels. Initially, only the first level (smallest number) will match. Once no matches are found, the next level becomes eligible for matching, repeating the process until all levels are checked. This allows for more control over how and when deeper layers of information are revealed during recursion, especially in combination with criteria as NOT ANY or NOT ALL combination of key matches.</p>
</li>
</ul>
<p><strong>Entries can activate other entries by mentioning their keywords in the content text.</strong></p>
<p>For example, if your World Info contains two entries:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">Entry #1
Keyword: Bessie
Content: Bessie is a cow and is friends with Rufus.</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">Entry #2
Keyword: Rufus
Content: Rufus is a dog.</code></pre>
</doc-codeblock></div>
<p><strong>Both</strong> of them will be pulled into the context if the message text mentions <strong>just Bessie</strong>.</p>
<doc-anchor-target id="max-recursion-steps">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#max-recursion-steps">#</doc-anchor-trigger>
        <span>Max Recursion Steps</span>
    </h3>
</doc-anchor-target>
<p><strong>This setting is mutually exclusive with Min Activations.</strong></p>
<p>When set to zero, recursion nesting is only limited by your prompt budget. When set to a non-zero value, limits the total number of scan sweeps to desired maximum &quot;nesting level&quot;.</p>
<p>Example values:</p>
<ul>
<li>1 effectively disables recursion as the check stops after the first step.</li>
<li>2 can only activate recursive entries once.</li>
<li>3 can trigger recursion twice...</li>
</ul>
<doc-anchor-target id="case-sensitive-keys">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#case-sensitive-keys">#</doc-anchor-trigger>
        <span>Case-sensitive keys</span>
    </h3>
</doc-anchor-target>
<blockquote>
<p>Can be overridden on an entry level.</p>
</blockquote>
<p><strong>To get pulled into the context, entry keys need to match the case as they are defined in the World Info entry.</strong></p>
<p>This is useful when your keys are common words or parts of common words.</p>
<p>For example, when this setting is active, keys &#x27;rose&#x27; and &#x27;Rose&#x27; will be treated differently, depending on the inputs.</p>
<doc-anchor-target id="match-whole-words">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#match-whole-words">#</doc-anchor-trigger>
        <span>Match whole words</span>
    </h3>
</doc-anchor-target>
<blockquote>
<p>Can be overridden on an entry level.</p>
</blockquote>
<p>Entries with keys containing only one word will be matched only if the entire word is present in the search text. Enabled by default.</p>
<p>For example, if the setting is enabled and the entry key is &quot;king&quot;, then text such as &quot;long live the king&quot; would be matched, but &quot;it&#x27;s not to my liking&quot; wouldn&#x27;t.</p>
<p><strong>Important:</strong> this setting can have a detrimental effect when used with languages that don&#x27;t use whitespace to separate words (e.g. Japanese or Chinese). If you write entries in these languages, it is advised to keep it off.</p>
<doc-anchor-target id="alert-on-overflow">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#alert-on-overflow">#</doc-anchor-trigger>
        <span>Alert on overflow</span>
    </h3>
</doc-anchor-target>
<p>Shows an alert if the activated World Info exceeds the allocated token budget.</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-blue-500 dark:text-blue-400 hover:text-blue-700 hover:underline" href="https://github.com/SillyTavern/SillyTavern-Docs/edit/main/Usage/worldinfo.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Edit this page</span>
                                    </a>
                                </div>
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../../usage/prompts/reasoning/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">Reasoning</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../../usage/user-settings/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">User Settings</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2025. All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "World Info", level: 3, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
